<?xml version="1.0"?>
<robot name="robot_assembly" xmlns:xacro="http://www.ros.org/wiki/xacro">
    
   <gazebo>
04
        <plugin name="diff_drive" filename="libgazebo_ros_diff_drive.so">
05
            <!-- Wheel info-->
06
            <left_joint>leftfront</left_joint>
07
            <right_joint>rightfront</right_joint>
08
            <wheel_separation>0.32</wheel_separation>
09
            <wheel_diameter>0.25</wheel_diameter>
10
 
11
            <!-- Limits-->
12
            <max_wheel_torque>200</max_wheel_torque>
13
            <max_wheel_acceleration>10.0</max_wheel_acceleration>
14
 
15
            <!-- Output-->
16
            <odometry_frame>odom</odometry_frame>
17
            <robot_base_frame>base_link</robot_base_frame>
18
 
19
            <publish_odom>true</publish_odom> 
20
            <publish_odom_tf>true</publish_odom_tf> 
21
            <publish_wheel_tf>true</publish_wheel_tf> 
22
 
23
        </plugin>
24
     </gazebo>
25
 


    <gazebo reference="camera_link">
      <material>Gazebo/Red</material>
      <sensor name="camera_sensor" type="camera">
        <pose>0 0 0 0 0 0</pose>
        <visualize>true</visualize>
        <update_rate>10.0</update_rate>
        <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
          <frame_name>custom_frame</frame_name>
        </plugin>
      </sensor>
    </gazebo>

    <gazebo reference="lidar_link">
      <sensor name="lidar" type="ray">
        <pose>0.215 0 0.215 0 0 0</pose>
        <always_on>true</always_on>
        <visualize>true</visualize>
        <update_rate>5</update_rate>
        <ray>
          <scan>
            <horizontal>
              <samples>360</samples>
              <resolution>1.00000</resolution>
              <min_angle>0.000000</min_angle>
              <max_angle>6.280000</max_angle>
            </horizontal>
          </scan>
          <range>
            <min>0.120000</min>
            <max>3.5</max>
            <resolution>0.015000</resolution>
          </range>
          <noise>
            <type>gaussian</type>
            <mean>0.0</mean>
            <stddev>0.01</stddev>
          </noise>
        </ray>
        <plugin name="scan" filename="libgazebo_ros_ray_sensor.so">
          <ros>
            <remapping>~/out:=scan</remapping>
          </ros>
          <output_type>sensor_msgs/LaserScan</output_type>
          <frame_name>lidar_link</frame_name>
        </plugin>
      </sensor>
    </gazebo>

    <link name="base_footprint" />

    <joint name="base_footprint_joint" type="fixed">
      <parent link="base_footprint" />
      <child link="base_link" />
      <origin xyz="0 0 0.10"/>
    </joint>

    <link name="base_link">
      <inertial>
        <origin xyz="-2.3315E-15 8.3267E-17 0.06908" rpy="0 0 0" />
        <mass value="34" />
        <inertia ixx="0.11562" ixy="0.00010128" ixz="6.4309E-18" iyy="0.63275" iyz="8.4833E-16" izz="0.69302" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///home/mero_1/robot_assembly/install/robot_assembly/share/robot_assembly/meshes/base_link.STL" />
        </geometry>
        <material name="">
          <color rgba="1 1 1 1" />
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///home/mero_1/robot_assembly/install/robot_assembly/share/robot_assembly/meshes/base_link.STL" />
        </geometry>
      </collision>
    </link>
    
    <link name="lidar_link">
     <inertial>
       <origin xyz="0 0 0" rpy="0 0 0"/>
        <mass value="0.1"/>
        <inertia ixx="0.1" ixy="0" ixz="0" iyy="0.1" iyz="0" izz="0.1"/>
     </inertial>
     <visual>
       <geometry>
         <box size="0.05 0.05 0.05"/>        
       </geometry>      
      </visual>
     <collision>
       <origin xyz="0 0 0" rpy="0 0 0"/>
       <geometry>
          <box size="0.05 0.05 0.05"/>
        </geometry>
      </collision>  
    </link>

    <joint name="lidar_joint" type="fixed">
      <parent link="base_link"/>
      <child link="lidar_link"/>
      <origin xyz="0.5 0 0.28" rpy="0 0 0"/>
    </joint>

    <link name="camera_link">
     <inertial>
       <origin xyz="0 0 0" rpy="0 0 0"/>
        <mass value="0.1"/>
        <inertia ixx="0.1" ixy="0" ixz="0" iyy="0.1" iyz="0" izz="0.1"/>
     </inertial>
     <visual>
       <geometry>
         <box size="0.05 0.05 0.05"/>        
       </geometry>      
      </visual>
     <collision>
       <origin xyz="0 0 0" rpy="0 0 0"/>
       <geometry>
          <box size="0.05 0.05 0.05"/>
        </geometry>
      </collision>  
    </link>

    <joint name="camera_joint" type="fixed">
      <parent link="base_link"/>
      <child link="camera_link"/>
      <origin xyz="0 0 0.20" rpy="0 0 0"/>
    </joint>

    <link name="left_front_wheel">
      <inertial>
        <origin xyz="2.1095E-05 2.8789E-05 0.040353" rpy="0 0 0" />
        <mass value="4.7694" />
        <inertia ixx="0.023623" ixy="-9.2831E-09" ixz="5.5853E-09" iyy="0.023623" iyz="-1.8931E-08" izz="0.042818" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///home/mero_1/robot_assembly/install/robot_assembly/share/robot_assembly/meshes/left_front_wheel.STL" />
        </geometry>
        <material name="">
          <color rgba="0.75294 0.75294 0.75294 1" />
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///home/mero_1/robot_assembly/install/robot_assembly/share/robot_assembly/meshes/left_front_wheel.STL" />
        </geometry>
      </collision>
    </link>
    
    <joint name="leftfront" type="continuous">
      <origin xyz="0.1483 0.2145 0.05" rpy="1.5708 0 0" />
      <parent link="base_link" />
      <child link="left_front_wheel" />
      <axis xyz="0 0 -1" />
    </joint>
    
    <link name="right_front_wheel">
      <inertial>
        <origin xyz="-3.0513E-05 1.8513E-05 -0.040353" rpy="0 0 0" />
        <mass value="4.7694" />
        <inertia ixx="0.023623" ixy="-3.605E-09" ixz="-2.0923E-09" iyy="0.023623" iyz="1.9627E-08" izz="0.042818" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///home/mero_1/robot_assembly/install/robot_assembly/share/robot_assembly/meshes/right_front_wheel.STL" />
        </geometry>
        <material name="">
          <color rgba="0.75294 0.75294 0.75294 1" />
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///home/mero_1/robot_assembly/install/robot_assembly/share/robot_assembly/meshes/right_front_wheel.STL" />
        </geometry>
      </collision>
    </link>
    
    <joint name="rightfront" type="continuous">
      <origin xyz="0.1483 -0.2145 0.05" rpy="1.5708 0 0" />
      <parent link="base_link" />
      <child link="right_front_wheel" />
      <axis xyz="0 0 -1" />
    </joint>
    
    <link name="left_rear_wheel">
      <inertial>
        <origin xyz="-2.4071E-05 2.6351E-05 0.040353" rpy="0 0 0" />
        <mass value="4.7694" />
        <inertia ixx="0.023623" ixy="3.0174E-09" ixz="1.966E-08" iyy="0.023623" iyz="1.748E-09" izz="0.042818" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///home/mero_1/robot_assembly/install/robot_assembly/share/robot_assembly/meshes/left_rear_wheel.STL" />
        </geometry>
        <material name="">
          <color rgba="0.75294 0.75294 0.75294 1" />
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///home/mero_1/robot_assembly/install/robot_assembly/share/robot_assembly/meshes/left_rear_wheel.STL" />
        </geometry>
      </collision>
    </link>
    
    <joint name="leftrear" type="continuous">
      <origin xyz="-0.1483 0.2145 0.05" rpy="1.5708 0 0" />
      <parent link="base_link" />
      <child link="left_rear_wheel" />
      <axis xyz="0 0 -1" />
    </joint>
    
    <link name="right_rear_wheel">
    <inertial>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <mass value="4.7694" />
        <inertia ixx="0.023623" ixy="0" ixz="0" iyy="0.023623" iyz="0" izz="0.042818" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
      <geometry>
        <mesh filename="file:///home/mero_1/robot_assembly/install/robot_assembly/share/robot_assembly/meshes/right_rear_wheel.STL" />
      </geometry>
      <material name="">
        <color rgba="1 1 1 1" />
      </material>
      </visual>
       <collision>
          <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="file:///home/mero_1/robot_assembly/install/robot_assembly/share/robot_assembly/meshes/right_rear_wheel.STL" />
        </geometry>
    </collision>
    </link>

    
    
    <joint name="rightrear" type="continuous">
      <origin xyz="-0.1483 -0.2145 0.05" rpy="1.5708 0 0" />
      <parent link="base_link" />
      <child link="right_rear_wheel" />
      <axis xyz="0 0 -1" />
    </joint>
    
</robot>
